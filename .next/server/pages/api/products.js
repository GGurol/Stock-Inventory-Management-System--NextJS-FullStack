"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products";
exports.ids = ["pages/api/products"];
exports.modules = {

/***/ "@prisma/client?9bbd":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/products/index.ts */ \"(api)/./pages/api/products/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/products\",\n        pathname: \"/api/products\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_products_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb2R1Y3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZwcm9kdWN0cyUyRmluZGV4LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx5REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMseURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RvY2t5Lz80NWEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcHJvZHVjdHMvaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdWN0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2R1Y3RzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/products/index.ts":
/*!*************************************!*\
  !*** ./pages/api/products/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client?9bbd\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/auth */ \"(api)/./utils/auth.ts\");\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nasync function handler(req, res) {\n    const session = await (0,_utils_auth__WEBPACK_IMPORTED_MODULE_1__.getSessionServer)(req, res);\n    if (!session) {\n        return res.status(401).json({\n            error: \"Unauthorized\"\n        });\n    }\n    const { method } = req;\n    const userId = session.id;\n    switch(method){\n        case \"POST\":\n            try {\n                const { name, sku, price, quantity, status, categoryId, supplierId } = req.body;\n                // Check if SKU already exists\n                const existingProduct = await prisma.product.findUnique({\n                    where: {\n                        sku\n                    }\n                });\n                if (existingProduct) {\n                    return res.status(400).json({\n                        error: \"SKU must be unique\"\n                    });\n                }\n                // Use Prisma for product creation to ensure consistency\n                const product = await prisma.product.create({\n                    data: {\n                        name,\n                        sku,\n                        price,\n                        quantity: BigInt(quantity),\n                        status,\n                        userId,\n                        categoryId,\n                        supplierId,\n                        createdAt: new Date()\n                    }\n                });\n                // Fetch category and supplier data for the response\n                const category = await prisma.category.findUnique({\n                    where: {\n                        id: categoryId\n                    }\n                });\n                const supplier = await prisma.supplier.findUnique({\n                    where: {\n                        id: supplierId\n                    }\n                });\n                // Return the created product data with category and supplier names\n                res.status(201).json({\n                    id: product.id,\n                    name: product.name,\n                    sku: product.sku,\n                    price: product.price,\n                    quantity: Number(product.quantity),\n                    status: product.status,\n                    userId: product.userId,\n                    categoryId: product.categoryId,\n                    supplierId: product.supplierId,\n                    createdAt: product.createdAt.toISOString(),\n                    category: category?.name || \"Unknown\",\n                    supplier: supplier?.name || \"Unknown\"\n                });\n            } catch (error) {\n                res.status(500).json({\n                    error: \"Failed to create product\"\n                });\n            }\n            break;\n        case \"GET\":\n            try {\n                const products = await prisma.product.findMany({\n                    where: {\n                        userId\n                    }\n                });\n                // Debug log - only log in development\n                if (true) {\n                    console.log(\"Raw products from database:\", products);\n                }\n                // Fetch category and supplier data separately\n                const transformedProducts = await Promise.all(products.map(async (product)=>{\n                    const category = await prisma.category.findUnique({\n                        where: {\n                            id: product.categoryId\n                        }\n                    });\n                    const supplier = await prisma.supplier.findUnique({\n                        where: {\n                            id: product.supplierId\n                        }\n                    });\n                    return {\n                        ...product,\n                        quantity: Number(product.quantity),\n                        createdAt: product.createdAt.toISOString(),\n                        category: category?.name || \"Unknown\",\n                        supplier: supplier?.name || \"Unknown\"\n                    };\n                }));\n                res.status(200).json(transformedProducts);\n            } catch (error) {\n                res.status(500).json({\n                    error: \"Failed to fetch products\"\n                });\n            }\n            break;\n        case \"PUT\":\n            try {\n                const { id, name, sku, price, quantity, status, categoryId, supplierId } = req.body;\n                const updatedProduct = await prisma.product.update({\n                    where: {\n                        id\n                    },\n                    data: {\n                        name,\n                        sku,\n                        price,\n                        quantity: BigInt(quantity),\n                        status,\n                        categoryId,\n                        supplierId\n                    }\n                });\n                // Fetch category and supplier data for the response\n                const category = await prisma.category.findUnique({\n                    where: {\n                        id: categoryId\n                    }\n                });\n                const supplier = await prisma.supplier.findUnique({\n                    where: {\n                        id: supplierId\n                    }\n                });\n                // Return the updated product data with category and supplier names\n                res.status(200).json({\n                    id: updatedProduct.id,\n                    name: updatedProduct.name,\n                    sku: updatedProduct.sku,\n                    price: updatedProduct.price,\n                    quantity: Number(updatedProduct.quantity),\n                    status: updatedProduct.status,\n                    userId: updatedProduct.userId,\n                    categoryId: updatedProduct.categoryId,\n                    supplierId: updatedProduct.supplierId,\n                    createdAt: updatedProduct.createdAt.toISOString(),\n                    category: category?.name || \"Unknown\",\n                    supplier: supplier?.name || \"Unknown\"\n                });\n            } catch (error) {\n                res.status(500).json({\n                    error: \"Failed to update product\"\n                });\n            }\n            break;\n        case \"DELETE\":\n            try {\n                const { id } = req.body;\n                await prisma.product.delete({\n                    where: {\n                        id\n                    }\n                });\n                res.status(204).end();\n            } catch (error) {\n                res.status(500).json({\n                    error: \"Failed to delete product\"\n                });\n            }\n            break;\n        default:\n            res.setHeader(\"Allow\", [\n                \"POST\",\n                \"GET\",\n                \"PUT\",\n                \"DELETE\"\n            ]);\n            res.status(405).end(`Method ${method} Not Allowed`);\n    }\n}\nconst config = {\n    api: {\n        externalResolver: true\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU87YUFBUztZQUN2RHpDLElBQUlFLE1BQU0sQ0FBQyxLQUFLc0MsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFbkMsT0FBTyxZQUFZLENBQUM7SUFDdEQ7QUFDRjtBQUVPLE1BQU1xQyxTQUFTO0lBQ3BCQyxLQUFLO1FBQ0hDLGtCQUFrQjtJQUNwQjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdG9ja3kvLi9wYWdlcy9hcGkvcHJvZHVjdHMvaW5kZXgudHM/OTI0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvblNlcnZlciB9IGZyb20gXCJAL3V0aWxzL2F1dGhcIjtcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZVxuKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uU2VydmVyKHJlcSwgcmVzKTtcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSk7XG4gIH1cblxuICBjb25zdCB7IG1ldGhvZCB9ID0gcmVxO1xuICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLmlkO1xuXG4gIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgY2FzZSBcIlBPU1RcIjpcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgc2t1LCBwcmljZSwgcXVhbnRpdHksIHN0YXR1cywgY2F0ZWdvcnlJZCwgc3VwcGxpZXJJZCB9ID1cbiAgICAgICAgICByZXEuYm9keTtcblxuICAgICAgICAvLyBDaGVjayBpZiBTS1UgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQcm9kdWN0ID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgc2t1IH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChleGlzdGluZ1Byb2R1Y3QpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJTS1UgbXVzdCBiZSB1bmlxdWVcIiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSBQcmlzbWEgZm9yIHByb2R1Y3QgY3JlYXRpb24gdG8gZW5zdXJlIGNvbnNpc3RlbmN5XG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBza3UsXG4gICAgICAgICAgICBwcmljZSxcbiAgICAgICAgICAgIHF1YW50aXR5OiBCaWdJbnQocXVhbnRpdHkpIGFzIGFueSxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICBzdXBwbGllcklkLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRmV0Y2ggY2F0ZWdvcnkgYW5kIHN1cHBsaWVyIGRhdGEgZm9yIHRoZSByZXNwb25zZVxuICAgICAgICBjb25zdCBjYXRlZ29yeSA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogY2F0ZWdvcnlJZCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3VwcGxpZXIgPSBhd2FpdCBwcmlzbWEuc3VwcGxpZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHN1cHBsaWVySWQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXR1cm4gdGhlIGNyZWF0ZWQgcHJvZHVjdCBkYXRhIHdpdGggY2F0ZWdvcnkgYW5kIHN1cHBsaWVyIG5hbWVzXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXG4gICAgICAgICAgc2t1OiBwcm9kdWN0LnNrdSxcbiAgICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICAgICAgICBxdWFudGl0eTogTnVtYmVyKHByb2R1Y3QucXVhbnRpdHkpLFxuICAgICAgICAgIHN0YXR1czogcHJvZHVjdC5zdGF0dXMsXG4gICAgICAgICAgdXNlcklkOiBwcm9kdWN0LnVzZXJJZCxcbiAgICAgICAgICBjYXRlZ29yeUlkOiBwcm9kdWN0LmNhdGVnb3J5SWQsXG4gICAgICAgICAgc3VwcGxpZXJJZDogcHJvZHVjdC5zdXBwbGllcklkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogcHJvZHVjdC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnk/Lm5hbWUgfHwgXCJVbmtub3duXCIsXG4gICAgICAgICAgc3VwcGxpZXI6IHN1cHBsaWVyPy5uYW1lIHx8IFwiVW5rbm93blwiLFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiRmFpbGVkIHRvIGNyZWF0ZSBwcm9kdWN0XCIgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJHRVRcIjpcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBEZWJ1ZyBsb2cgLSBvbmx5IGxvZyBpbiBkZXZlbG9wbWVudFxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlJhdyBwcm9kdWN0cyBmcm9tIGRhdGFiYXNlOlwiLCBwcm9kdWN0cyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGZXRjaCBjYXRlZ29yeSBhbmQgc3VwcGxpZXIgZGF0YSBzZXBhcmF0ZWx5XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkUHJvZHVjdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICBwcm9kdWN0cy5tYXAoYXN5bmMgKHByb2R1Y3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgICB3aGVyZTogeyBpZDogcHJvZHVjdC5jYXRlZ29yeUlkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHN1cHBsaWVyID0gYXdhaXQgcHJpc21hLnN1cHBsaWVyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgICB3aGVyZTogeyBpZDogcHJvZHVjdC5zdXBwbGllcklkIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4ucHJvZHVjdCxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IE51bWJlcihwcm9kdWN0LnF1YW50aXR5KSwgLy8gQ29udmVydCBCaWdJbnQgdG8gTnVtYmVyXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogcHJvZHVjdC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSwgLy8gQ29udmVydCBgY3JlYXRlZEF0YCB0byBJU08gc3RyaW5nXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeT8ubmFtZSB8fCBcIlVua25vd25cIiwgLy8gVHJhbnNmb3JtIGNhdGVnb3J5IHRvIHN0cmluZ1xuICAgICAgICAgICAgICBzdXBwbGllcjogc3VwcGxpZXI/Lm5hbWUgfHwgXCJVbmtub3duXCIsIC8vIFRyYW5zZm9ybSBzdXBwbGllciB0byBzdHJpbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih0cmFuc2Zvcm1lZFByb2R1Y3RzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIHByb2R1Y3RzXCIgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJQVVRcIjpcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHNrdSxcbiAgICAgICAgICBwcmljZSxcbiAgICAgICAgICBxdWFudGl0eSxcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgY2F0ZWdvcnlJZCxcbiAgICAgICAgICBzdXBwbGllcklkLFxuICAgICAgICB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgdXBkYXRlZFByb2R1Y3QgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHNrdSxcbiAgICAgICAgICAgIHByaWNlLFxuICAgICAgICAgICAgcXVhbnRpdHk6IEJpZ0ludChxdWFudGl0eSkgYXMgYW55LCAvLyBDb252ZXJ0IHRvIEJpZ0ludCBmb3IgZGF0YWJhc2VcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICBzdXBwbGllcklkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZldGNoIGNhdGVnb3J5IGFuZCBzdXBwbGllciBkYXRhIGZvciB0aGUgcmVzcG9uc2VcbiAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGNhdGVnb3J5SWQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN1cHBsaWVyID0gYXdhaXQgcHJpc21hLnN1cHBsaWVyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBzdXBwbGllcklkIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCBwcm9kdWN0IGRhdGEgd2l0aCBjYXRlZ29yeSBhbmQgc3VwcGxpZXIgbmFtZXNcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgIGlkOiB1cGRhdGVkUHJvZHVjdC5pZCxcbiAgICAgICAgICBuYW1lOiB1cGRhdGVkUHJvZHVjdC5uYW1lLFxuICAgICAgICAgIHNrdTogdXBkYXRlZFByb2R1Y3Quc2t1LFxuICAgICAgICAgIHByaWNlOiB1cGRhdGVkUHJvZHVjdC5wcmljZSxcbiAgICAgICAgICBxdWFudGl0eTogTnVtYmVyKHVwZGF0ZWRQcm9kdWN0LnF1YW50aXR5KSwgLy8gQ29udmVydCBCaWdJbnQgdG8gTnVtYmVyXG4gICAgICAgICAgc3RhdHVzOiB1cGRhdGVkUHJvZHVjdC5zdGF0dXMsXG4gICAgICAgICAgdXNlcklkOiB1cGRhdGVkUHJvZHVjdC51c2VySWQsXG4gICAgICAgICAgY2F0ZWdvcnlJZDogdXBkYXRlZFByb2R1Y3QuY2F0ZWdvcnlJZCxcbiAgICAgICAgICBzdXBwbGllcklkOiB1cGRhdGVkUHJvZHVjdC5zdXBwbGllcklkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdXBkYXRlZFByb2R1Y3QuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5Py5uYW1lIHx8IFwiVW5rbm93blwiLFxuICAgICAgICAgIHN1cHBsaWVyOiBzdXBwbGllcj8ubmFtZSB8fCBcIlVua25vd25cIixcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkZhaWxlZCB0byB1cGRhdGUgcHJvZHVjdFwiIH0pO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiREVMRVRFXCI6XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGlkIH0gPSByZXEuYm9keTtcblxuICAgICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdC5kZWxldGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5lbmQoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiRmFpbGVkIHRvIGRlbGV0ZSBwcm9kdWN0XCIgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiUE9TVFwiLCBcIkdFVFwiLCBcIlBVVFwiLCBcIkRFTEVURVwiXSk7XG4gICAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHttZXRob2R9IE5vdCBBbGxvd2VkYCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgYXBpOiB7XG4gICAgZXh0ZXJuYWxSZXNvbHZlcjogdHJ1ZSxcbiAgfSxcbn07XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2V0U2Vzc2lvblNlcnZlciIsInByaXNtYSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXNzaW9uIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibWV0aG9kIiwidXNlcklkIiwiaWQiLCJuYW1lIiwic2t1IiwicHJpY2UiLCJxdWFudGl0eSIsImNhdGVnb3J5SWQiLCJzdXBwbGllcklkIiwiYm9keSIsImV4aXN0aW5nUHJvZHVjdCIsInByb2R1Y3QiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJjcmVhdGUiLCJkYXRhIiwiQmlnSW50IiwiY3JlYXRlZEF0IiwiRGF0ZSIsImNhdGVnb3J5Iiwic3VwcGxpZXIiLCJOdW1iZXIiLCJ0b0lTT1N0cmluZyIsInByb2R1Y3RzIiwiZmluZE1hbnkiLCJwcm9jZXNzIiwiY29uc29sZSIsImxvZyIsInRyYW5zZm9ybWVkUHJvZHVjdHMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwidXBkYXRlZFByb2R1Y3QiLCJ1cGRhdGUiLCJkZWxldGUiLCJlbmQiLCJzZXRIZWFkZXIiLCJjb25maWciLCJhcGkiLCJleHRlcm5hbFJlc29sdmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/products/index.ts\n");

/***/ }),

/***/ "(api)/./utils/auth.ts":
/*!***********************!*\
  !*** ./utils/auth.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getSessionClient: () => (/* binding */ getSessionClient),\n/* harmony export */   getSessionServer: () => (/* binding */ getSessionServer),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client?9bbd\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nconst JWT_SECRET = process.env.JWT_SECRET || \"your_jwt_secret\";\n// --- SERVER-SIDE UTILITIES ---\nconst generateToken = (userId)=>{\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        userId\n    }, JWT_SECRET, {\n        expiresIn: \"1h\"\n    });\n};\nconst verifyToken = (token)=>{\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n    } catch (error) {\n        console.error(\"Token verification failed:\", error);\n        return null;\n    }\n};\nconst getSessionServer = async (req, res)=>{\n    const token = req.cookies[\"session_id\"];\n    if (!token) {\n        return null;\n    }\n    const decoded = verifyToken(token);\n    if (!decoded) {\n        return null;\n    }\n    const user = await prisma.user.findUnique({\n        where: {\n            id: decoded.userId\n        },\n        select: {\n            id: true,\n            createdAt: true,\n            email: true,\n            name: true,\n            updatedAt: true,\n            username: true\n        }\n    });\n    return user;\n};\n// --- CLIENT-SIDE UTILITY ---\nconst getSessionClient = async ()=>{\n    try {\n        const response = await fetch(\"/api/auth/session\", {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            credentials: \"include\"\n        });\n        if (response.ok) {\n            const user = await response.json();\n            return user;\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Error fetching session:\", error);\n        return null;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9hdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQ2tFO0FBRW5DO0FBRS9CLE1BQU1FLFNBQVMsSUFBSUYsd0RBQVlBO0FBQy9CLE1BQU1HLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0YsVUFBVSxJQUFJO0FBSTdDLGdDQUFnQztBQUV6QixNQUFNRyxnQkFBZ0IsQ0FBQ0M7SUFDNUIsT0FBT04sd0RBQVEsQ0FBQztRQUFFTTtJQUFPLEdBQUdKLFlBQVk7UUFBRU0sV0FBVztJQUFLO0FBQzVELEVBQUU7QUFFSyxNQUFNQyxjQUFjLENBQUNDO0lBQzFCLElBQUk7UUFDRixPQUFPViwwREFBVSxDQUFDVSxPQUFPUjtJQUMzQixFQUFFLE9BQU9VLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVLLE1BQU1FLG1CQUFtQixPQUM5QkMsS0FDQUM7SUFFQSxNQUFNTixRQUFRSyxJQUFJRSxPQUFPLENBQUMsYUFBYTtJQUN2QyxJQUFJLENBQUNQLE9BQU87UUFDVixPQUFPO0lBQ1Q7SUFFQSxNQUFNUSxVQUFVVCxZQUFZQztJQUM1QixJQUFJLENBQUNRLFNBQVM7UUFDWixPQUFPO0lBQ1Q7SUFFQSxNQUFNQyxPQUFPLE1BQU1sQixPQUFPa0IsSUFBSSxDQUFDQyxVQUFVLENBQUM7UUFDeENDLE9BQU87WUFBRUMsSUFBSUosUUFBUVosTUFBTTtRQUFDO1FBQzVCaUIsUUFBUTtZQUNORCxJQUFJO1lBQ0pFLFdBQVc7WUFDWEMsT0FBTztZQUNQQyxNQUFNO1lBQ05DLFdBQVc7WUFDWEMsVUFBVTtRQUNaO0lBQ0Y7SUFFQSxPQUFPVDtBQUNULEVBQUU7QUFFRiw4QkFBOEI7QUFFdkIsTUFBTVUsbUJBQW1CO0lBQzlCLElBQUk7UUFDRixNQUFNQyxXQUFXLE1BQU1DLE1BQU0scUJBQXFCO1lBQ2hEQyxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1lBQzlDQyxhQUFhO1FBQ2Y7UUFFQSxJQUFJSixTQUFTSyxFQUFFLEVBQUU7WUFDZixNQUFNaEIsT0FBTyxNQUFNVyxTQUFTTSxJQUFJO1lBQ2hDLE9BQU9qQjtRQUNUO1FBQ0EsT0FBTztJQUNULEVBQUUsT0FBT1AsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPO0lBQ1Q7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RvY2t5Ly4vdXRpbHMvYXV0aC50cz9iMzhhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50LCBVc2VyIGFzIFByaXNtYVVzZXIgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCBDb29raWVzIGZyb20gXCJqcy1jb29raWVcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcInlvdXJfand0X3NlY3JldFwiO1xuXG50eXBlIFVzZXIgPSBPbWl0PFByaXNtYVVzZXIsIFwicGFzc3dvcmRcIj47IC8vIFJldHVybiBhIFVzZXIgdHlwZSB3aXRob3V0IHRoZSBwYXNzd29yZFxuXG4vLyAtLS0gU0VSVkVSLVNJREUgVVRJTElUSUVTIC0tLVxuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbiA9ICh1c2VySWQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBqd3Quc2lnbih7IHVzZXJJZCB9LCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogXCIxaFwiIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHZlcmlmeVRva2VuID0gKHRva2VuOiBzdHJpbmcpOiB7IHVzZXJJZDogc3RyaW5nIH0gfCBudWxsID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgeyB1c2VySWQ6IHN0cmluZyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJUb2tlbiB2ZXJpZmljYXRpb24gZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTZXNzaW9uU2VydmVyID0gYXN5bmMgKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZSBcbik6IFByb21pc2U8VXNlciB8IG51bGw+ID0+IHtcbiAgY29uc3QgdG9rZW4gPSByZXEuY29va2llc1tcInNlc3Npb25faWRcIl07XG4gIGlmICghdG9rZW4pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbik7XG4gIGlmICghZGVjb2RlZCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBkZWNvZGVkLnVzZXJJZCB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgIG5hbWU6IHRydWUsXG4gICAgICB1cGRhdGVkQXQ6IHRydWUsXG4gICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gdXNlcjtcbn07XG5cbi8vIC0tLSBDTElFTlQtU0lERSBVVElMSVRZIC0tLVxuXG5leHBvcnQgY29uc3QgZ2V0U2Vzc2lvbkNsaWVudCA9IGFzeW5jICgpOiBQcm9taXNlPFVzZXIgfCBudWxsPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hdXRoL3Nlc3Npb24nLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLCAvLyBJbXBvcnRhbnQ6IHNlbmRzIGNvb2tpZXMgd2l0aCB0aGUgcmVxdWVzdFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzZXNzaW9uOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07Il0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImp3dCIsInByaXNtYSIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiZ2VuZXJhdGVUb2tlbiIsInVzZXJJZCIsInNpZ24iLCJleHBpcmVzSW4iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5IiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0U2Vzc2lvblNlcnZlciIsInJlcSIsInJlcyIsImNvb2tpZXMiLCJkZWNvZGVkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwiY3JlYXRlZEF0IiwiZW1haWwiLCJuYW1lIiwidXBkYXRlZEF0IiwidXNlcm5hbWUiLCJnZXRTZXNzaW9uQ2xpZW50IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJjcmVkZW50aWFscyIsIm9rIiwianNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/auth.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();